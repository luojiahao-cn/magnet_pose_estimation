estimator_config:
  # 基础配置
  # estimator_type: optimization
  estimator_type: kalman


  # 磁铁参数配置
  magnet:
    strength: 10
    strength_delta: 0
    direction: [0, 0, 1]
    position: [0.005, 0.035, 0.03]  # 匹配仿真真值位置

  # 工作空间限制
  workspace:
    min_position: [-0.1, -0.1, -0.05]   # xyz最小值 [m] - 允许负z值，覆盖仿真范围
    max_position: [0.1, 0.1, 0.1]       # xyz最大值 [m] - 限制在合理范围内
    enable_constraints: true             # 启用工作空间约束

  # EKF参数配置 - 亚毫米级精度
  kalman:
    # 位置过程噪声（亚毫米级）
    position_process_noise: 1e-10    # 约0.3mm标准差
    # 角度过程噪声
    angle_process_noise:  0      # 小角度变化
    # 测量噪声
    measurement_noise: 1e-9         # 传感器测量噪声
    # 初始协方差
    initial_covariance: 0.01

  # 基础优化参数配置（基线方案）
  optimization:
    max_iterations: 50             # 基础迭代次数
    function_tolerance: 1.0e-12    # 更严格的函数收敛条件
    gradient_tolerance: 1.0e-14    # 更严格的梯度收敛条件
    parameter_tolerance: 1.0e-12   # 更严格的参数收敛条件
    num_threads: 16
    minimizer_progress_to_stdout: false  # 开启详细输出，观察收敛过程
    
    linear_solver_type: "DENSE_QR"        # 基础线性求解器
    use_huber_loss: false                 # 不使用鲁棒损失函数
    enable_multi_stage: false             # 不使用多阶段优化
    cost_threshold: 1000.0                # 高阈值，基本不触发重优化

