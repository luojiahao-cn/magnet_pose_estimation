# 扫描控制节点（私有命名空间 ~）
# 机械臂名称（对应 mag_device_arm 配置中的 arm name）
arm_name: arm1
# 末端执行器 link 名称（用于 TF 查询当前位姿，判断是否使用笛卡尔路径）
end_effector_link: bracket_tcp_link
# 笛卡尔路径阈值（米）：当当前位置和目标位置距离小于此值时，使用笛卡尔路径规划（直线移动）
# 这样可以避免近距离移动时出现大角度旋转的问题。设置为 0.0 或负值将禁用此功能
cartesian_path_threshold: 0.2
frame_id: world
# 姿态（弧度）
yaw: 0.0
pitch: -3.14159
# 启动后自动扫描
autostart: true
# 传感器数据话题
mag_topic: /mag_sensor/data_mT
# 移动到目标后的等待时间（秒）
wait_time: 2.0
# 最大稳定等待时间（秒）
max_stable_wait_time: 10.0
# 输出基目录（时间戳文件夹将创建在此目录下）
# 支持相对路径（相对于工作空间根目录）或绝对路径
output_base_dir: src/04_application/mag_arm_scan/data
# 体积边界与步长（米）
volume_min: [0.3, -0.2, 1.0]
volume_max: [0.5, 0.2, 1.3]
step: [0.05, 0.05, 0.05]
# 每个传感器采集的样本帧数
frames_per_sensor: 10
# 达到采样要求的最大等待时间（秒）
max_sample_wait_time: 5.0
# 如果需要在每个点确保检测到的传感器数量（例如 25），可在这里指定。0 表示不强制检测（best-effort）。
required_num_sensors: 25
# 在开始扫描前用于自动检测传感器 id 的超时时间（秒）
sensor_detect_time: 10.0

visualization:
  enabled: true
  topic: /mag_field_vectors
  arrow_length: 0.02
  arrow_shaft_ratio: 0.1
  arrow_head_ratio: 0.25
  arrow_head_length_ratio: 0.3
  magnitude_min: 0.0
  magnitude_max: 5.0
  alpha: 1.0
  color_low: [0.0, 0.0, 1.0]
  color_high: [1.0, 0.0, 0.0]
  use_tf_sensor_pose: true
  sensor_frame_prefix: sensor_
  tf_lookup_timeout: 0.05

# 可选：如果希望覆盖特定测试点，可在此给出若干 (x, y, z, roll, pitch, yaw) 组合。
# 如果设置，将覆盖默认的网格扫描顺序，按列表顺序执行。
test_points:
  - [0.38, 0.00, 1.05, 0.0, -3.14159, 0.0]
  - [0.44, 0.12, 1.18, 0.0, -3.05433, 0.30]
  - [0.46, -0.10, 1.22, 0.0, -3.05433, -0.30]
  - [0.34, 0.00, 1.15, 0.0, -3.14159, 0.785398]
